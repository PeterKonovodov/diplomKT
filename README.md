<img src = "logo.png" width = 200px>
  # DEMO-tivation! v0.9
  ## Краткое описание структуры дипломного проекта по курсу "Введение в Android на языке Kotlin"
Ссылка на задание: https://github.com/netology-code/bkt-diploma/tree/light

Данное приложение основано на одной Activity и компоненте Navigation, который управляет переключеним активных экранов (фрагментов):
  - Экран просмотра списка цитат.
 - Экран просмотра списка цитат с сортировкой по автору. - Экран ввода новой цитаты.

В приложении подразумевается, что существуют цитаты от владельца телефона
(User, имя жестко забито в ресурсах String), посторонних авторов.

User может копировать цитату постороннего автора, но не свою.

User может удалить свою цитату, но не чужую.

При вводе цитаты имя автора выбирать нельзя, но можно выбрать изображение из галереи и ссылку на
страницу в интернете.

Для полноценного тестирования эмулятор должен содержать какие-либо изображения в галерее (чтобы их выбирать).




## О выборке и сохранении изображений.
В классе Quote имеется поле:

imagePath : String - путь к файлу изображения, хранимому в папке приложения

При запуске приложения из базы данных берется путь к файлу изображения, откуда оно считывается
(если есть) и адаптером выводится на экран.

Логика начального заполнения БД такова:
Если БД пустая (dao.getSize() == 0), то считаем, что произошел первый запуск приложения. Вызывается функция hardCodeData()
В функцию saveQuote передается поле imagePath, формируемое extesion-функцией Drawable.toFile(), на вход
которой поступает изображение из ресурсов. Drawable.toFile() сохраняет изображение в виде файла с именем, которое берется  из hashCode объекта Drawale.

В репозитории организован кэш изображений в виде HashMap<Long, Drawable>, где key - путь до файла изображения.

За счет этого загрузка картинок из ФС происходит только один раз при пролистывании адаптера.


### Сделано:

Весь основной функционал по работе с БД, загрузка/сохранение изображений, лайки/дизлайки, шаринг,
сортировка, внедрено порционное чтение БД с помощью библиотеки Paging Library.

### Остались неясности:


1. Пришлось работать с Entity везде, в т.ч. и в адаптере. .Dto() (преобразование QuoteEntity к Quote) используется там, где без этого можно обойтись. Думаю, есть смысл отказаться от сущности Quote. Напомню во всех примерах Paging Library + Room я видел только сущности @Entity.
2. Как будто прокрутка стала медленнее, чем до внедрения Paging Library
3. Вставил в репозитории для эксперимента BoundaryCallback для тестирования подгрузки данных из БД
 с помощью установки точек останова на функциях:
 #### onZeroItemsLoaded,
 #### onItemAtFrontLoaded,
 #### onItemAtEndLoaded.

onItemAtFrontLoaded срабатывает всегда при инициализации LiveData, onItemAtEndLoaded срабатывает очень редко, почти вне зависимости от размера страницы. Создается ощущение, что из Room грузится весь список сразу.